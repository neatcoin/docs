(self.webpackChunkneatcoin_docs=self.webpackChunkneatcoin_docs||[]).push([[883],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),l=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),h=l(n),d=r,m=h["".concat(s,".").concat(d)]||h[d]||u[d]||i;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},6661:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return c},metadata:function(){return s},toc:function(){return l},default:function(){return u}});var a=n(2122),r=n(9756),i=(n(7294),n(3905)),o=["components"],c={title:"Atomic swap"},s={unversionedId:"atomic-swap",id:"atomic-swap",isDocsHomePage:!1,title:"Atomic swap",description:"Atomic swap allows users on two different blockchains to exchange",source:"@site/docs/atomic-swap.md",sourceDirName:".",slug:"/atomic-swap",permalink:"/docs/atomic-swap",editUrl:"https://github.com/neatcoin/neatcoin.org/edit/master/docs/atomic-swap.md",version:"current",frontMatter:{title:"Atomic swap"},sidebar:"docsSidebar",previous:{title:"Auction domains",permalink:"/docs/nomo/auction"}},l=[{value:"Process",id:"process",children:[{value:"Initiator and counterparty",id:"initiator-and-counterparty",children:[]},{value:"Initiator to generate a secret",id:"initiator-to-generate-a-secret",children:[]},{value:"Initiator to create a pending atomic swap",id:"initiator-to-create-a-pending-atomic-swap",children:[]},{value:"Counterparty to create the counter pending atomic swap",id:"counterparty-to-create-the-counter-pending-atomic-swap",children:[]},{value:"Initiator to claim the swap and to reveal the secret",id:"initiator-to-claim-the-swap-and-to-reveal-the-secret",children:[]},{value:"Counterparty to finish claiming the swap",id:"counterparty-to-finish-claiming-the-swap",children:[]}]}],p={toc:l};function u(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Atomic swap allows users on two different blockchains to exchange\ntokens in a trustless way. Neatcoin supports atomic swap. It should in\ntheory work with any other blockchains that support smart\ncontracts. However, the code is currently only tested with Kulupu."),(0,i.kt)("h2",{id:"process"},"Process"),(0,i.kt)("p",null,"This document describes the process of atomic swap on Neatcoin. Let's\nsay Alice and Bob want to exchange between Neatcoin and Kulupu. Alice\nwants to send Bob ",(0,i.kt)("inlineCode",{parentName:"p"},"100 NEAT"),", in exchange for ",(0,i.kt)("inlineCode",{parentName:"p"},"200 KLP"),". The process\nis as follows."),(0,i.kt)("h3",{id:"initiator-and-counterparty"},"Initiator and counterparty"),(0,i.kt)("p",null,'First, Alice and Bob select who will be the "initiator" and the\n"counterparty". They can be chosen arbitrarily. Let\'s say Alice has\ndecided to be the initiator, and Bob has decided to be the\ncounterparty.'),(0,i.kt)("h3",{id:"initiator-to-generate-a-secret"},"Initiator to generate a secret"),(0,i.kt)("p",null,"The initiator first needs to generate a secret. This is a secret that\nonly the initiator knows, but will be revealed to the counterparty at\nthe end of the atomic swap. There are not much requirements for the\nsecret other than it is less than 1024 bytes in size."),(0,i.kt)("p",null,"For example, let's say Alice has decided on the secret\n",(0,i.kt)("inlineCode",{parentName:"p"},"thisisasupersecret"),"."),(0,i.kt)("h3",{id:"initiator-to-create-a-pending-atomic-swap"},"Initiator to create a pending atomic swap"),(0,i.kt)("p",null,"The initiator then proceeds to create a pending atomic swap. To do\nthis, go to ",(0,i.kt)("a",{parentName:"p",href:"https://wallet.neatcoin.org"},"Neatcoin wallet"),' and select\nthe source blockchain, under tab "account" - "atomic swap". Choose\naction "declare as initiator". Parameters are described below:'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Source"),": the sender's account. In our example, this is Alice's\nNeatcoin account."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Target"),": the receiver's account. In our example, this is Bob's\nNeatcoin account."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Secret"),": enter the secret that has been decided in the previous\nstep. In our example, this is ",(0,i.kt)("inlineCode",{parentName:"li"},"thisisasupersecret"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Value"),": the amount of money to send in the source blockchain. In\nour case, this is ",(0,i.kt)("inlineCode",{parentName:"li"},"100 NEAT"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Duration"),": how long (in block numbers) the atomic swap is valid\nfor. A recommended value is 14400 on Neatcoin, and 1440 on Kulupu\n(one day).")),(0,i.kt)("p",null,'The initiator then copies the "secret hash" and let the counterparty\nknow this value. The initiator then submits the extrinsic on-chain.'),(0,i.kt)("h3",{id:"counterparty-to-create-the-counter-pending-atomic-swap"},"Counterparty to create the counter pending atomic swap"),(0,i.kt)("p",null,'The counterparty then should go to the source blockchain under the\nsame location in the wallet, to check that all parameters in the\npending atomic swap are correct. The counterparty can then go to the\ntarget blockchain\'s atomic swap tab, and choose action "declare as\ncounterparty". Parameters are described as below:'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Source"),": the sender's account. In our example, this is Bob's\nKulupu account."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Target"),": the receiver's account. In our example, this is Alice's\nKulupu account."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Secret hash"),": enter the secret hash that has been received from\nAlice. In our example, this is\n",(0,i.kt)("inlineCode",{parentName:"li"},"0x4e3148ec40dca4e4e2a9fa3e4601dc3591be5ad3a345d78165637eaeb803d773"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Value"),": the amount of money to send in the target blockchain. In\nour case, this is ",(0,i.kt)("inlineCode",{parentName:"li"},"200 KLP"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Duration"),": this should be slightly longer than the duration of\nthe initiator. A recommended value is 21600 on Neatcoin, and 2160 on\nKulupu (one and a half day).")),(0,i.kt)("p",null,"The counterparty then submits the extrinsic on-chain."),(0,i.kt)("h3",{id:"initiator-to-claim-the-swap-and-to-reveal-the-secret"},"Initiator to claim the swap and to reveal the secret"),(0,i.kt)("p",null,'The initiator should then go to the target blockchain and check that\nall parameters submitted by the counterparty is correct. The initiator\nthen select the pending atomic swap, and choose action "claim". The\ninitiator then enters the secret, which will reveal it on-chain (as\nwell as to the counterparty).'),(0,i.kt)("p",null,'During this time, the counterparty should watch the network events\n(under "network" - "explorer") in the wallet. An event with type\n',(0,i.kt)("inlineCode",{parentName:"p"},"atomicSwap.SwapClaimed")," should appear, which has the secret revealed\nin the ",(0,i.kt)("inlineCode",{parentName:"p"},"proof")," parameter."),(0,i.kt)("h3",{id:"counterparty-to-finish-claiming-the-swap"},"Counterparty to finish claiming the swap"),(0,i.kt)("p",null,'The counterparty then uses the secret obtained from the last step to\nfinish claiming the swap, by choose the pending atomic swap, and\nchoose action "claim". The atomic swap is now finished.'))}u.isMDXComponent=!0}}]);